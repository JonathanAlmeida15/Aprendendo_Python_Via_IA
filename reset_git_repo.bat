@echo off
title Reset Git Repository
color 0A

echo =======================================================
echo üöÄ  REINICIALIZANDO REPOSITORIO GIT DO PROJETO
echo =======================================================
echo.

:: 1Ô∏è‚É£ Verifica se o Git est√° instalado
where git >nul 2>nul
if %errorlevel% neq 0 (
    echo ‚ùå ERRO: Git nao encontrado no PATH.
    echo Instale o Git e tente novamente.
    pause
    exit /b
)

:: 2Ô∏è‚É£ Confirma√ß√£o do usu√°rio
set /p resposta="Tem certeza que deseja LIMPAR o repositorio e recriar do zero? (S/N): "
if /I "%resposta%" NEQ "S" (
    echo Operacao cancelada.
    pause
    exit /b
)

:: 3Ô∏è‚É£ Remove o hist√≥rico Git
echo.
echo üßπ Removendo pasta .git...
rmdir /s /q .git

:: 4Ô∏è‚É£ Recria o reposit√≥rio Git
echo.
echo üîÑ Iniciando novo reposit√≥rio Git...
git init

:: 5Ô∏è‚É£ Cria .gitignore b√°sico
echo.
echo üõ°Ô∏è Criando .gitignore padr√£o (Python + dados grandes)...
(
echo __pycache__/
echo *.pyc
echo *.pyo
echo *.pyd
echo .Python
echo env/
echo venv/
echo *.pkl
echo *.csv
echo *.zip
echo *.rar
echo *.h5
echo *.sqlite
echo *.db
) > .gitignore

:: 6Ô∏è‚É£ Solicita a URL do reposit√≥rio remoto
set /p repoURL="Digite a URL do repositorio remoto (ex: https://github.com/usuario/repositorio.git): "
git remote add origin %repoURL%

:: 7Ô∏è‚É£ Adiciona e commita novamente
echo.
echo üóÇÔ∏è Adicionando arquivos...
git add .

echo.
git commit -m "Reinicializacao do projeto sem arquivos grandes"

:: 8Ô∏è‚É£ Faz o push for√ßado
echo.
echo ‚òÅÔ∏è Enviando novo reposit√≥rio para o GitHub...
git branch -M main
git push -f origin main

echo.
echo ‚úÖ Processo concluido com sucesso!
echo O reposit√≥rio foi limpo e reenviado.
echo =======================================================
pause
